var twttrSettings=function(){var B=["background_color","text_color","link_color","sidebar_fill_color","sidebar_border_color"];var A={updateUrl:function(C){$("#username_url").html(C)},checkNameAvailability:function(){$.ajax({type:"GET",url:"/users/username_available",data:{username:$("#user_screen_name").val()},dataType:"json",success:function(D){var E=D.msg;var C=D.valid?"green":"red";$("#username_msg").html(E).css("color",C);$("#username_url").css("color",C)},complete:function(){$("#avail_check_indicator").fadeOut("medium",function(){$("#username_msg").fadeIn("medium")});clearTimeout(_tmp.checkNameAvailabilityTimer)}})},screenNameKeyUp:function(){jQuery("#user_screen_name").keyup(function(C){var D=jQuery("#user_screen_name");if(D.val()!=""){if(jQuery.inArray(C.keyCode,[16,17,18,20,27,33,34,35,37,38,39,40,144])==-1){clearTimeout(_tmp.checkNameAvailabilityTimer);jQuery("#username_url").html(D.val());if(jQuery("#avail_check_indicator").css("display")=="none"){jQuery("#username_msg").fadeOut("medium",function(){jQuery("#avail_check_indicator").fadeIn("medium")})}_tmp.checkNameAvailabilityTimer=setTimeout("twttrSettings.checkNameAvailability()",2000)}}})},setTZ:function(){var C=$("#time_zone_select_row");$("#user_time_zone").children("option").each(function(D,E){var F=$(E)[0];if(F.text.match(new RegExp("..."+((new Date().getTimezoneOffset()/60)*(-1)).toString().replace(/(.)([0-9])$/,"$10$2")))){$("#user_time_zone").attr("selectedIndex",F.index-1);F.selectedIndex=F.index;return false}})},updateColors:function(){var E=$("#user_profile_background_color").val();var D=$("#user_profile_sidebar_fill_color").val();var G=$("#user_profile_text_color").val();var F=$("#user_profile_link_color").val();var C=$("#user_profile_sidebar_border_color").val();$("body").css({"background-color":E,color:G});$("#side_base").css({"background-color":D,"border-color":C});$(".stats td+td").css("border-color",C);$("#side div.stats").css("border-color",C);$("#side div.section-header h3.faq-header").css("border-color",C);$("#side a").css("color",F);$("#design_customization a").css("color",F);$(".top-navigation a").css("color",F);$("#footer a").css("color",F);$(".top-navigation a").css("color",F);$("#content .tabMenu li a").css("color",F);$("#side .stats a span.label").css("color",F);if($("#backgrounds").css("display")!="none"){$("#current_tab").val("backgrounds")}else{if($("#colors").css("display")!="none"){$("#current_tab").val("colors")}else{$("#current_tab").val("none")}}},setBackgroundImage:function(C,D){if((D===true)||(D===false)){D=D}else{if($("#user_profile_background_tile:checked").val()){D=true}else{D=false}}$("#user_profile_use_background_image").val(C=="none"?"false":"true");$("body").css({"background-image":C=="none"?"none":"url('"+C+"')","background-repeat":D?"repeat":"no-repeat","background-attachment":D?"scroll":"fixed"});$("#user_profile_background_image").val(C)},setTheme:function(D){_tmp.hasCustomBackgroundImage=false;var C=themes[D];$("#user_profile_background_tile").attr("checked",C.tiled);$("#current_background span").css("backgroundImage","url('"+C.swatch+"')");$.each(B,function(){$("#user_profile_"+this).val(C[this]).css("background-color");$("#user_profile_"+this+"_box").css("background-color",C[this])});$("#themes").attr("class","theme"+D);_tmp.currentImage=C.image;twttrSettings.setBackgroundImage(C.image,C.tiled);if(C.image!="none"){$("#current_background").addClass("active")}else{$("#no_background").addClass("active")}$("#user_profile_default").val(true);$("#user_profile_theme").val(D)},isDefaultDesign:function(){var D=themes[$("#user_profile_theme").val()];if($("#user_profile_use_background_image").val()=="false"||$("#user_profile_background_tile").attr("checked")!=D.tiled||($("#file").val()||_tmp.hasCustomBackgroundImage)){return false}var C=true;$.each(B,function(){if($("#user_profile_"+this).val()!=D[this]){C=false}});if(!C){return false}return true},validateDefaultDesign:function(){$("#user_profile_default").val(twttrSettings.isDefaultDesign())},initProfileDesign:function(){$("#title_picker a").click(function(){$("#colors").toggle();$("#backgrounds").hide();$("#title_background").removeClass("active");if($("#colors").css("display")=="none"){$("#title_picker").removeClass("active");$("#title_background").removeClass("inactive")}else{$("#title_picker").addClass("active");$("#title_background").addClass("inactive")}if($("#user_profile_default").val()){$("#user_profile_default").val(false)}return false});$("#title_background a").click(function(){$("#backgrounds").toggle();$("#colors").hide();$("#title_picker").removeClass("active");if($("#backgrounds").css("display")=="none"){$("#title_background").removeClass("active");$("#title_picker").removeClass("inactive")}else{$("#title_background").addClass("active");$("#title_picker").addClass("inactive")}return false});$("#themes a").click(function(){var E=$(this).attr("id");twttrSettings.setTheme(E.substring(5));return false});$("#backgrounds a").click(function(){$("#backgrounds a").removeClass("active");$(this).addClass("active");var E=$(this).attr("id");if(E=="current_background"){twttrSettings.setBackgroundImage(_tmp.currentImage)}else{if(E=="no_background"){twttrSettings.setBackgroundImage("none")}}return false});$("#user_profile_background_tile").click(function(){var E=$("#user_profile_background_tile:checked").val();$("body").css({"background-repeat":E?"repeat":"no-repeat","background-attachment":E?"scroll":"fixed"});$("#user_profile_use_background_image").val("true")});var D;var C=(function(){var E=[8,9,13,16,17,18,37,38,39,40,45,46,86,88,90];for(var F=48;F<=57;F++){E.push(F)}for(var F=65;F<=70;F++){E.push(F)}for(var F=96;F<=105;F++){E.push(F)}return E})();$("#design_customization form a").click(twttrSettings.updateColors)}};return A}();